(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"343e":function(e,t,a){},"60ef":function(e,t,a){},6695:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"q-pa-md bg-dark text-white flex flex-center",attrs:{elevated:"",flat:""}},[a("q-toolbar",{staticClass:"flex items-center justify-between layoutToolbar"},[a("q-btn",{staticClass:"text-transparent",attrs:{flat:"",round:"",dense:"",icon:"home"}}),a("q-tabs",{staticClass:"text-whie",attrs:{"narrow-indicator":"",dense:"",align:"center"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{ripple:{color:"white"},name:"manageNews",icon:"unsubscribe",label:"Новости"}}),a("q-tab",{attrs:{ripple:{color:"white"},name:"manageCompetitions",icon:"emoji_events",label:"Соревнования"}}),2===e.getUserPrivilege?a("q-tab",{attrs:{ripple:{color:"white"},name:"manageUsers",icon:"person",label:"Пользователи"}}):e._e()],1),a("q-btn-dropdown",{staticClass:"dropDown",attrs:{"dropdown-icon":"change_history",flat:""},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",{staticClass:"flex row items-center justify-evenly no-wrap"},[a("img",{staticClass:"heroImage q-mx-sm",attrs:{src:e.userPhoto,width:"32px"}}),a("span",{staticClass:"q-pa-sm"},[e._v(e._s(e.userName))])])]},proxy:!0}])},[a("q-list",[0===e.getUserPrivilege?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.showRegisteredComps}},[a("q-item-section",[a("q-item-label",[e._v("Мои записи")])],1)],1):e._e(),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return t.preventDefault(),e.goHome(t)}}},[a("q-item-section",[a("q-item-label",[e._v("Главная")])],1)],1),a("q-splitter",{attrs:{value:110,horizontal:""}}),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.signOut}},[a("q-item-section",[a("q-item-label",[e._v("Выход")])],1)],1)],1)],1)],1)],1),a("q-page-container",{staticClass:"pContainer"},[a("q-tab-panels",{staticClass:"flex flex-center",attrs:{animated:"","transition-prev":"fade","transition-next":"fade"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1 h-full",attrs:{name:"manageNews"}},[a("manageNewsComponent")],1),a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1",attrs:{name:"manageCompetitions"}},[a("mangeCompetitionsComponent")],1),a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1",attrs:{name:"manageUsers"}},[a("manageUsersComponent")],1)],1)],1)],1)},s=[],n=a("ded3"),l=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md relative"},[a("div",{staticClass:"q-pa-md flex column items-center justify-between"},[a("div",{staticClass:"buttonContainer"},[a("q-btn",{attrs:{round:"",outline:"",color:"positive",icon:"add"},on:{click:function(t){return t.preventDefault(),e.setToCreate(t)}}})],1),a("q-virtual-scroll",{staticClass:"virtualScroll",attrs:{items:e.news},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"black"},expression:"{ color: 'black' }"}],key:i._id,staticClass:"bg-white q-my-md"},[a("q-item-section",[a("q-item-label",{staticClass:"text-subtitle2"},[e._v("\n              "+e._s(i.header)+"\n            ")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-fab",{attrs:{color:"primary",icon:"keyboard_arrow_left",direction:"left",flat:""}},[a("q-fab-action",{attrs:{color:"negative",icon:"delete_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.deleteEntry(i)}}}),a("q-fab-action",{attrs:{color:"primary",icon:"mode_edit_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.setToEdit(i)}}})],1)],1)],1)]}}])}),a("div",{staticClass:"controls q-mt-xl flex column flex"},[a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"back",id:"back"},model:{value:e.eBack,callback:function(t){e.eBack=t},expression:"eBack"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"header",id:"header"},model:{value:e.eHeader,callback:function(t){e.eHeader=t},expression:"eHeader"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"author",id:"author"},model:{value:e.eAuthor,callback:function(t){e.eAuthor=t},expression:"eAuthor"}}),a("q-select",{staticClass:"q-my-md",attrs:{disable:!e.editing,outlined:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:e.eMeta,callback:function(t){e.eMeta=t},expression:"eMeta"}}),a("q-input",{staticClass:"q-my-md",attrs:{disable:!e.editing,outlined:"",type:"textarea",rules:[function(e){return e.length<=230||"Используйте менее 230 символов. Введено "+e.length}]},model:{value:e.ePBody,callback:function(t){e.ePBody=t},expression:"ePBody"}}),a("q-editor",{staticClass:"newsEditor",attrs:{disable:!e.editing},model:{value:e.eBody,callback:function(t){e.eBody=t},expression:"eBody"}}),a("q-btn",{staticClass:"q-my-md",attrs:{disable:null===e.eBody||null===e.eBack||null===e.eHeader||null===e.eAuthor||null===e.eHeader,outline:"",color:null!==e.eBody&&null!==e.eBack&&null!==e.eHeader&&null!==e.eAuthor&&null!==e.eHeader?"positive":"negative",label:"Сохранить"},on:{click:function(t){return t.preventDefault(),e.insertData(t)}}})],1)],1)])},r=[],c=(a("e6cf"),{name:"manageNewsComponent",data(){return{news:null,editing:!1,eBody:'<div style="text-align: center;"><b><br></b></div><div style="text-align: center;"><b><br></b></div><div style="text-align: center;"><b>Выберите статью для редактирования</b></div>',eMeta:null,eHeader:null,eAuthor:null,eID:null,ePBody:null,eBack:null,creating:!1}},methods:{async fetchData(){let e=await this.$axios.get("/news");this.news=e.data},setToEdit(e){this.creating=!1,this.editing=!0,this.eBody=e.body,this.eMeta=e.meta,this.eHeader=e.header,this.eAuthor=e.author,this.ePBody=e.bodyIntro,this.eBack=e.back,this.eID=e._id},setToCreate(){this.editing=!0,this.eBody="Содержание",this.eMeta=["Мета","Теги"],this.eHeader="Заголовок",this.eAuthor="Автор",this.ePBody="Краткое содержание",this.eBack="Изображение",this.eID=null,this.creating=!0},async insertData(){if(this.creating){let e=await this.$axios.post("/news",{header:this.eHeader,author:this.eAuthor,body:this.eBody,bodyIntro:this.ePBody,back:this.eBack,meta:this.eMeta});this.news.push(e.data.savedEntry),this.$q.notify({color:"green",message:"Новость создана успешно.",icon:"check"})}else await this.$axios.put("/news",{header:this.eHeader,author:this.eAuthor,body:this.eBody,bodyIntro:this.ePBody,back:this.eBack,meta:this.eMeta,id:this.eID}),this.$q.notify({color:"green",message:"Новость обновлена успешно.",icon:"check"}),this.fetchData()},async deleteEntry(e){await this.$axios.delete("/news",{data:{id:e._id}}),this.fetchData(),this.$q.notify({color:"green",message:"Новость удалена успешно.",icon:"check"})}},created(){this.fetchData()}}),d=c,u=(a("f721"),a("2877")),p=a("9989"),m=a("9c40"),h=a("a12b"),b=a("66e5"),g=a("4074"),f=a("0170"),v=a("c294"),y=a("72db"),q=a("27f9"),k=a("ddd8"),w=a("d66b"),x=a("714f"),C=a("eebe"),D=a.n(C),_=Object(u["a"])(d,o,r,!1,null,"f7221718",null),P=_.exports;D()(_,"components",{QPage:p["a"],QBtn:m["a"],QVirtualScroll:h["a"],QItem:b["a"],QItemSection:g["a"],QItemLabel:f["a"],QFab:v["a"],QFabAction:y["a"],QInput:q["a"],QSelect:k["a"],QEditor:w["a"]}),D()(_,"directives",{Ripple:x["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md relative"},[a("div",{staticClass:"q-pa-md flex column items-center justify-between"},[a("div",{staticClass:"buttonContainer"},[a("q-btn",{attrs:{round:"",outline:"",color:"positive",icon:"add"},on:{click:function(t){return t.preventDefault(),e.setToCreate(t)}}})],1),a("q-virtual-scroll",{staticClass:"virtualScroll",attrs:{items:e.competitions},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"black"},expression:"{ color: 'black' }"}],key:i._id,staticClass:"bg-white q-my-md"},[a("q-item-section",[a("q-item-label",{staticClass:"text-subtitle2"},[e._v(e._s(i.header)+"\n            ")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-fab",{attrs:{color:"primary",icon:"keyboard_arrow_left",direction:"left",flat:""}},[a("q-fab-action",{attrs:{color:"negative",icon:"delete_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.deleteEntry(i._id)}}}),a("q-fab-action",{attrs:{color:"primary",icon:"mode_edit_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.setToEdit(i)}}})],1)],1)],1)]}}])}),a("div",{staticClass:"controls q-mt-xl flex column flex"},[a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"back",id:"back"},model:{value:e.eBack,callback:function(t){e.eBack=t},expression:"eBack"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"header",id:"header"},model:{value:e.eHeader,callback:function(t){e.eHeader=t},expression:"eHeader"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"stage",id:"stage"},model:{value:e.eStage,callback:function(t){e.eStage=t},expression:"eStage"}}),a("q-input",{attrs:{outlined:"",disable:!e.editing},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.eDate,callback:function(t){e.eDate=t},expression:"eDate"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"DD-MM-YYYY HH:mm",format24h:""},model:{value:e.eDate,callback:function(t){e.eDate=t},expression:"eDate"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.eDate,callback:function(t){e.eDate=t},expression:"eDate"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"location",id:"location"},model:{value:e.eLocation,callback:function(t){e.eLocation=t},expression:"eLocation"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"reward",id:"reward"},model:{value:e.eReward,callback:function(t){e.eReward=t},expression:"eReward"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"participants",id:"participants"},model:{value:e.eParticipants,callback:function(t){e.eParticipants=t},expression:"eParticipants"}}),a("q-select",{staticClass:"q-my-md",attrs:{disable:e.disableSelect,outlined:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:e.eParticipating,callback:function(t){e.eParticipating=t},expression:"eParticipating"}}),a("q-btn",{staticClass:"q-my-md",attrs:{disable:null===e.eBack||null===e.eHeader||null===e.eStage||null===e.eDate||null===e.eLocation||null===e.eReward||null===e.eParticipants,outline:"",color:null!==e.eBack&&null!==e.eHeader&&null!==e.eStage&&null!==e.eDate&&null!==e.eLocation&&null!==e.eReward&&null!==e.eParticipants?"positive":"negative",label:"Сохранить"},on:{click:function(t){return t.preventDefault(),e.insertData(t)}}})],1)],1)])},I=[],B={name:"mangeCompetitionsComponent",data(){return{competitions:null,eHeader:null,eStage:null,eDate:null,eReward:null,eParticipants:null,eBack:null,eLocation:null,creating:!1,editing:!1,eID:null,eParticipating:null,disableSelect:!0}},methods:{async fetchData(){let e=await this.$axios.get("/competitions");this.competitions=e.data},setToEdit(e){this.creating=!1,this.editing=!0,this.eID=e._id,this.eHeader=e.header,this.eStage=e.stage,this.eDate=e.date,this.eReward=e.reward,this.eLocation=e.location,this.eParticipants=e.participantsLimit,this.eBack=e.back,e.currentParticipants.length>0?(this.eParticipating=e.currentParticipants.map((e=>`${e.userID} - ${e.userName}`)),this.disableSelect=!1):(this.eParticipating="Нет зарегистрированных участников",this.disableSelect=!0)},setToCreate(){this.creating=!0,this.editing=!0,this.eID=null,this.eHeader="Заголовок",this.eStage="Стадия",this.eDate="",this.eReward="Награда",this.eLocation="Место",this.eParticipants="Максимум участников (число)",this.eBack="Изображение",this.eParticipating=[]},async insertData(){if(this.creating){let e=await this.$axios.post("/competitions",{header:this.eHeader,stage:this.eStage,date:this.eDate,reward:this.eReward,location:this.eLocation,participantsLimit:this.eParticipants,back:this.eBack,currentParticipants:this.eParticipating});this.competitions.push(e.data.savedEntry),this.$q.notify({color:"green",message:"Соревнование создано успешно.",icon:"check"})}else await this.$axios.put("/competitions",{header:this.eHeader,stage:this.eStage,date:this.eDate,reward:this.eReward,location:this.eLocation,participantsLimit:this.eParticipants,back:this.eBack,currentParticipants:this.eParticipating,id:this.eID}),this.$q.notify({color:"green",message:"Соревнование обновлено успешно.",icon:"check"}),this.fetchData()},async deleteEntry(e){await this.$axios.delete("/competitions",{data:{id:e}}),this.fetchData(),this.$q.notify({color:"green",message:"Новость удалена успешно.",icon:"check"})}},created(){this.fetchData()}},E=B,S=(a("7a4c"),a("0016")),H=a("7cbe"),$=a("52ee"),N=a("ca78"),U=a("7f67"),L=Object(u["a"])(E,Q,I,!1,null,"60351dbe",null),T=L.exports;D()(L,"components",{QPage:p["a"],QBtn:m["a"],QVirtualScroll:h["a"],QItem:b["a"],QItemSection:g["a"],QItemLabel:f["a"],QFab:v["a"],QFabAction:y["a"],QInput:q["a"],QIcon:S["a"],QPopupProxy:H["a"],QDate:$["a"],QTime:N["a"],QSelect:k["a"]}),D()(L,"directives",{Ripple:x["a"],ClosePopup:U["a"]});var j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md relative"},[a("div",{staticClass:"q-pa-md flex column items-center justify-between"},[a("q-virtual-scroll",{staticClass:"virtualScroll",attrs:{items:e.users},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:"black"},expression:"{ color: 'black' }"}],key:i._id,staticClass:"bg-white q-my-md"},[a("q-item-section",[a("q-item-label",[e._v("\n              "+e._s(Object.values(i.userData).filter((function(e){return e.split(" ").length>=3}))[0])+"\n            ")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-fab",{attrs:{color:"primary",icon:"keyboard_arrow_left",direction:"left",flat:""}},[a("q-fab-action",{attrs:{color:"negative",icon:"delete_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.deleteEntry(i._id)}}}),a("q-fab-action",{attrs:{color:"primary",icon:"mode_edit_outline",flat:""},on:{click:function(t){return t.preventDefault(),e.setToEdit(i)}}})],1)],1)],1)]}}])}),a("div",{staticClass:"controls q-mt-xl flex column flex text-center"},[a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"googleID",id:"googleID",readonly:""},model:{value:e.eGoogleID,callback:function(t){e.eGoogleID=t},expression:"eGoogleID"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"googleID",id:"googleID",readonly:""},model:{value:e.eUserName,callback:function(t){e.eUserName=t},expression:"eUserName"}}),a("q-input",{staticClass:"titleEditor q-my-md bg-white",attrs:{disable:!e.editing,outlined:"",type:"text",name:"privilege",id:"privilege"},model:{value:e.ePrivilege,callback:function(t){e.ePrivilege=t},expression:"ePrivilege"}}),a("div",[e._v("0 - пользователь; 1 - тренер; 2 - администратор;")]),a("q-btn",{staticClass:"q-my-md",attrs:{disable:null===e.eGoogleID||null===e.ePrivilege,outline:"",color:null!==e.eGoogleID&&null!==e.ePrivilege?"positive":"negative",label:"Сохранить"},on:{click:function(t){return t.preventDefault(),e.insertData(t)}}})],1)],1)])},R=[],A=a("2f62"),M={name:"manageUsersComponent",data(){return{users:null,ePrivilege:null,eGoogleID:null,eUserName:null,editing:!1,eID:null}},methods:{async fetchData(){let e=await this.$axios.get("/users");this.users=e.data},setToEdit(e){this.editing=!0,this.eUserName=Object.values(e.userData).filter((e=>e.split(" ").length>=3))[0],this.ePrivilege=e.privilege,this.eID=e._id,this.eGoogleID=e.gid},async insertData(){await this.$axios.put("/users",{privilege:this.ePrivilege,id:this.eID}),this.$q.notify({color:"green",message:"Пользователь обновлён успешно.",icon:"check"}),Object.values(this.getUser)[0].includes(this.eGoogleID)?(this.$q.notify({color:"red",message:"В целях безопасности вы деавторизированы в течение 5-ти секунд.",icon:"check"}),setTimeout((()=>{this.$router.go()}),5e3)):this.fetchData()},async deleteEntry(e){await this.$axios.delete("/users",{data:{id:e}}),this.$q.notify({color:"green",message:"Пользователь удалён успешно.",icon:"check"}),this.$q.notify({color:"red",message:"В целях безопасности вы деавторизированы в течение 5-ти секунд.",icon:"check"}),setTimeout((()=>{this.$router.go()}),5e3)}},created(){this.fetchData()},computed:l()({},Object(A["c"])({getUser:"user_store/getUser"}))},O=M,G=(a("6d58"),Object(u["a"])(O,j,R,!1,null,"3334139a",null)),Y=G.exports;D()(G,"components",{QPage:p["a"],QVirtualScroll:h["a"],QItem:b["a"],QItemSection:g["a"],QItemLabel:f["a"],QFab:v["a"],QFabAction:y["a"],QInput:q["a"],QBtn:m["a"]}),D()(G,"directives",{Ripple:x["a"]});var F={name:"PageDash",components:{manageNewsComponent:P,mangeCompetitionsComponent:T,manageUsersComponent:Y},data(){return{tab:"manageNews"}},methods:{goHome(){this.$router.push("/")}},computed:l()({},Object(A["c"])({user:"user_store/getUser",userName:"user_store/getUserName",userPhoto:"user_store/getUserPhoto",getUserPrivilege:"user_store/getUserPrivilege"}))},V=F,J=(a("fe20"),a("4d5a")),z=a("e359"),K=a("65c6"),W=a("429b"),X=a("7460"),Z=a("f20b"),ee=a("1c1c"),te=a("8562"),ae=a("09e3"),ie=a("adad"),se=a("823b"),ne=Object(u["a"])(V,i,s,!1,null,"0cc3a5c7",null);t["default"]=ne.exports;D()(ne,"components",{QLayout:J["a"],QHeader:z["a"],QToolbar:K["a"],QBtn:m["a"],QTabs:W["a"],QTab:X["a"],QBtnDropdown:Z["a"],QList:ee["a"],QItem:b["a"],QItemSection:g["a"],QItemLabel:f["a"],QSplitter:te["a"],QPageContainer:ae["a"],QTabPanels:ie["a"],QTabPanel:se["a"]}),D()(ne,"directives",{ClosePopup:U["a"]})},"6d58":function(e,t,a){"use strict";a("343e")},"7a4c":function(e,t,a){"use strict";a("a228")},a228:function(e,t,a){},d277:function(e,t,a){},f721:function(e,t,a){"use strict";a("60ef")},fe20:function(e,t,a){"use strict";a("d277")}}]);